import{z as P,o as _,b as z,w as t,p as e,aZ as g,b2 as m,M as I,B as $,ba as f,b9 as B,A as u,m as p,bz as M,k as x,aJ as E,c as V,G as k,F as w,a as D,x as R,bs as O,br as L,bA as F,bB as X,y as H,bC as J,aX as q,bq as G,j as Z,r as K}from"./index.ee0bb086.js";import{a as C}from"./axios.fab994a0.js";import{u as Q}from"./useAnsibleStore.111d7d97.js";import{V as j,a as T,b as Y}from"./VWindowItem.a79ef4d8.js";import{V as ee}from"./VDialog.4eecc8c5.js";import{b as N}from"./route-block.2f1a6263.js";import{V as te,a as oe}from"./VTabs.48ace95b.js";import"./scopeId.4ce01635.js";import"./VMenu.d2379632.js";import"./VCheckboxBtn.b444e5b8.js";const ae={methods:{nextTab(){this.$emit("clickNextTab")}}},ne=u(" \uC778\uD504\uB77CDX\uAC1C\uBC1C\uD300 "),le=p("h6",{class:"text-h6"},"IaCOps \uD504\uB85C\uC81D\uD2B8",-1),se=u(" \uC778\uD504\uB77CDX\uAC1C\uBC1C\uD300 "),ie=p("h6",{class:"text-h6"},"\uC804\uC0AC \uBCF4\uC548\uD615\uC0C1\uC218\uC9D1 \uD504\uB85C\uC81D\uD2B8",-1);function ce(l,o,A,s,b,c){return _(),z(B,null,{default:t(()=>[e(f,{md:"6",lg:"4"},{default:t(()=>[e(g,{class:"text-center",onClick:c.nextTab},{default:t(()=>[e(m,{class:"d-flex flex-column justify-center align-center"},{default:t(()=>[e(I,{color:"primary",variant:"tonal",size:"56",class:"mb-4"},{default:t(()=>[e($,{size:"2rem",icon:"mdi-cloud-check-outline"})]),_:1}),ne]),_:1}),e(m,null,{default:t(()=>[le]),_:1})]),_:1},8,["onClick"])]),_:1}),e(f,{md:"6",lg:"4"},{default:t(()=>[e(g,{class:"text-center",onClick:c.nextTab},{default:t(()=>[e(m,{class:"d-flex flex-column justify-center align-center"},{default:t(()=>[e(I,{color:"primary",variant:"tonal",size:"56",class:"mb-4"},{default:t(()=>[e($,{size:"2rem",icon:"mdi-cloud-check-outline"})]),_:1}),se]),_:1}),e(m,null,{default:t(()=>[ie]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})}const re=P(ae,[["render",ce]]);const ue={methods:{nextTab(){this.$emit("clickNextTab")}}},de=p("h2",{class:"title"}," AWS ",-1),fe=u(" Web Service "),_e=p("h6",{class:"text-h6"},"3-Tier Monolithic Architecture ",-1),me=p("br",null,null,-1),pe=u(" - WEB Tier : Multi EC2 (With ALB) "),be=p("br",null,null,-1),ve=u(" - WAS Server : Single EC2"),he=p("br",null,null,-1),xe=u(" - DB Server : Single EC2 ");function Ve(l,o,A,s,b,c){return _(),z(f,{cols:"6",md:"6",lg:"4"},{default:t(()=>[e(g,{class:"text-center",onClick:c.nextTab},{default:t(()=>[e(m,{class:"d-flex flex-column justify-center align-center"},{default:t(()=>[de,e(I,{color:"primary",variant:"tonal",size:"56",class:"mb-4"},{default:t(()=>[e($,{size:"2rem",icon:"mdi-account-box-outline"})]),_:1}),fe,_e,me,pe,be,ve,he,xe]),_:1})]),_:1},8,["onClick"])]),_:1})}const ge=P(ue,[["render",Ve]]),Ae=M("ActionStore",{state:()=>({selectedInventory:"",selectedAction:"",runResults:{}}),actions:{getInventories(){return C.get("/inventories").then(l=>l.data).catch(l=>{console.error(l)})},postAction(l){return C.post("/infra-manager",l,{headers:{"Content-Type":"application/json"}}).then(o=>o.data).catch(o=>{console.error("API \uC694\uCCAD \uC5D0\uB7EC:",o)})},postDryRun(l){return C.post(`/sw-config-management/dryrun/${l}`,{id:l}).then(o=>o.data).catch(o=>{console.error("API \uC694\uCCAD \uC5D0\uB7EC:",o)})},postRun(l){return C.post(`/sw-config-management/run/${l}`,{id:l}).then(o=>o.data).catch(o=>{console.error("API \uC694\uCCAD \uC5D0\uB7EC:",o)})}}});const ye=u(" ACTION \uC218\uD589 "),Se=u(" \uBA54\uC778\uD654\uBA74\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30 "),Ce=u(" \uC7AC\uAE30\uB3D9\uC774 \uC815\uC0C1\uC801\uC73C\uB85C \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC544\uB798 \uACB0\uACFC \uB85C\uADF8\uB97C \uD1B5\uD574 \uD655\uC778\uD558\uC138\uC694. "),$e=u(" confirm "),ke={key:0,class:"spinner-wrap"},Te={name:"ActionSettingApply",setup(l){const o=Ae(),A=Q(),s=x([]),b=["\uC7AC\uAE30\uB3D9","\uC810\uAC80"],c=x(""),S=x(""),r=x(""),d=x(!1),v=x(!1),a=()=>{A.getInventories({}).then(h=>{Object.keys(h.data).forEach(function(i){let n=h.data[i];if(n.id.startsWith("i-")){let y=`${n.id}, ${n.ip}, ${n.hostname}`;s.value.push(y)}})}).catch(h=>{console.error(h)})};E(()=>{a()});const U=()=>{d.value=!0;const i={ip:c.value.split(",")[1].trim(),action:"reboot"},n=JSON.stringify(i);console.log(n),o.postAction(n).then(y=>{r.value=y.data,d.value=!1,v.value=!0}).catch(y=>{console.error(y)})},W=()=>{window.location.href="/"};return(h,i)=>(_(),V(w,null,[e(L,{onSubmit:i[2]||(i[2]=O(()=>{},["prevent"])),method:"post"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(g,{title:"\uC778\uBCA4\uD1A0\uB9AC \uC120\uD0DD"},{default:t(()=>[e(m,null,{default:t(()=>[e(B,null,{default:t(()=>[e(f,{cols:"12",md:"4"},{default:t(()=>[e(j,{label:"\uC778\uBCA4\uD1A0\uB9AC \uC120\uD0DD",items:s.value,modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=n=>c.value=n)},null,8,["items","modelValue"])]),_:1}),e(f,{md:"4",cols:"4"},{default:t(()=>[e(j,{id:"sublist",label:" action \uC120\uD0DD",items:b,modelValue:S.value,"onUpdate:modelValue":i[1]||(i[1]=n=>S.value=n)},null,8,["modelValue"])]),_:1}),e(f,{md:"4",cols:"4"},{default:t(()=>[e(k,{onClick:U,type:"submit"},{default:t(()=>[ye]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(g,{title:"RUN \uACB0\uACFC"},{default:t(()=>[e(m,{class:"scrollable-p"},{default:t(()=>[(_(!0),V(w,null,D(r.value,n=>(_(),V("p",null,[p("span",null,R(n),1)]))),256))]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(k,{onClick:W},{default:t(()=>[Se]),_:1})]),_:1})]),_:1}),e(ee,{modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=n=>v.value=n),width:"500"},F({default:t(()=>[e(g,{title:"Success Message"},{default:t(()=>[e(m,null,{default:t(()=>[Ce]),_:1}),e(X,null,{default:t(()=>[e(H),e(k,{onClick:i[3]||(i[3]=n=>{v.value=!1})},{default:t(()=>[$e]),_:1})]),_:1})]),_:1})]),_:2},[h.shouldShowDialog?{name:"activator",fn:t(()=>[])}:void 0]),1032,["modelValue"]),d.value?(_(),V("div",ke,[e(J,{class:"spinner",size:70,width:7,color:"primary",indeterminate:""})])):q("",!0)],64))}},Ie={name:"[tab]",setup(l){const o=G(),A=Z(),s=x(o.params.tab),b=[{id:1,title:"1. Project Select",icon:"mdi-account-outline",tab:"project"},{id:2,title:"2. Portfolio Select",icon:"mdi-account-outline",tab:"portfolio"},{id:3,title:"3. Action",icon:"mdi-account-outline",tab:"action"}];function c(){let r="";s.value==="project"?r="portfolio":s.value==="portfolio"?r="action":s.value==="action"&&(r="project"),s.value=r,A.push({name:"action-tab",params:{tab:r}})}function S(r){const d=b.findIndex(a=>a.tab===s.value);return b.findIndex(a=>a.tab===r)>d}return(r,d)=>{const v=K("UserProfileHeader");return _(),V("div",null,[e(v,{class:"mb-6"}),e(oe,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=a=>s.value=a),class:"v-tabs-pill"},{default:t(()=>[(_(),V(w,null,D(b,a=>e(te,{key:a.icon,value:a.tab,to:{name:"action-tab",params:{tab:a.tab}},disabled:S(a.tab)},{default:t(()=>[e($,{size:"20",start:"",icon:a.icon},null,8,["icon"]),u(" "+R(a.title),1)]),_:2},1032,["value","to","disabled"])),64))]),_:1},8,["modelValue"]),e(Y,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=a=>s.value=a),class:"mt-4 disable-tab-transition",touch:!1},{default:t(()=>[e(T,{value:"project"},{default:t(()=>[e(re,{onClickNextTab:c})]),_:1}),e(T,{value:"portfolio"},{default:t(()=>[e(ge,{onClickNextTab:c})]),_:1}),e(T,{value:"action"},{default:t(()=>[e(Te,{onClickNextTab:c})]),_:1})]),_:1},8,["modelValue"])])}}};typeof N=="function"&&N(Ie);export{Ie as default};
